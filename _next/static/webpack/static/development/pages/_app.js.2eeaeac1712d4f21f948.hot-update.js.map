{"version":3,"file":"static/webpack/static\\development\\pages\\_app.js.2eeaeac1712d4f21f948.hot-update.js","sources":["webpack:///./pages/_app.js"],"sourcesContent":["/**\r\nNext.js 使用該App 組件初始化頁面。您可以覆蓋它並控制頁面初始化。這可以讓你做出驚人的事情：\r\n * 在頁面更改之間保持佈局\r\n * 導航頁面時保持狀態\r\n * 使用自定義錯誤處理 componentDidCatch\r\n * 將其他數據注入頁面（例如，通過處理GraphQL查詢）\r\n */\r\nimport React from 'react'\r\nimport App, { Container } from 'next/app'\r\nimport Head from 'next/head'\r\nimport Router, { withRouter } from 'next/router'\r\nimport { DefaultSeo, LogoJsonLd } from 'next-seo'\r\nimport NProgress from 'nprogress'\r\nimport { ThemeProvider } from 'styled-components'\r\n\r\n// import your default seo configuration\r\nimport SEO from '@config/seo.config'\r\n\r\n// GA\r\nimport * as gtag from '@utils/gtag'\r\n// Router.events.on('routeChangeComplete', url => gtag.pageview(url))\r\n\r\nlet startProgressTimer = null\r\nconst startProgress = () => NProgress.start()\r\nconst stopProgress = () => {\r\n  console.log('stopProgress')\r\n  clearTimeout(startProgressTimer)\r\n  Router.events.off('beforeHistoryChange', stopProgress)\r\n  Router.events.off('routeChangeComplete', stopProgress)\r\n  Router.events.off('routeChangeError', stopProgress)\r\n  NProgress.done()\r\n}\r\n\r\nconst showProgressBar = delay => {\r\n  startProgressTimer = setTimeout(startProgress, delay)\r\n  Router.events.on('beforeHistoryChange', stopProgress)\r\n  Router.events.on('routeChangeComplete', stopProgress)\r\n  Router.events.on('routeChangeError', stopProgress)\r\n}\r\n\r\nconst handlerChangeStart = url => {\r\n  console.log('App is changing to: ', url)\r\n  showProgressBar(300)\r\n}\r\n\r\nRouter.events.on('routeChangeStart', handlerChangeStart)\r\nRouter.events.on('routeChangeComplete', () => {\r\n  // dev mode路由跳转后样式丢失\r\n  // 原因：dev下样式根据页面动态加载，浏览器缓存文件styles.chunk.css造成样式不更新。\r\n  // 解决方案： 利用版本号强制重载样式文件\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    const els = document.querySelectorAll('link[href*=\"/_next/static/css/styles.chunk.css\"]')\r\n    const timestamp = new Date().valueOf()\r\n    els[0].href = `/_next/static/css/styles.chunk.css?v=${timestamp}`\r\n  }\r\n\r\n  gtag.pageview(Router.pathname)\r\n})\r\n\r\nconst theme = {\r\n  colors: {\r\n    primary: '#0070f3',\r\n  },\r\n}\r\n\r\nclass MyApp extends App {\r\n  // static async getInitialProps({ Component, ctx }) {\r\n  //   let pageProps = {}\r\n\r\n  //   if (Component.getInitialProps) {\r\n  //     pageProps = await Component.getInitialProps(ctx)\r\n  //   }\r\n\r\n  //   return { pageProps }\r\n  // }\r\n\r\n  componentWillUnmount() {\r\n    clearTimeout(startProgressTimer)\r\n    Router.events.off('routeChangeStart', handlerChangeStart)\r\n    Router.events.off('beforeHistoryChange', stopProgress)\r\n    Router.events.off('routeChangeComplete', stopProgress)\r\n    Router.events.off('routeChangeError', stopProgress)\r\n  }\r\n\r\n  componentDidMount() {\r\n    NProgress.done(true)\r\n  }\r\n\r\n  render() {\r\n    console.log('render MyApp')\r\n\r\n    const { Component, pageProps, router } = this.props\r\n\r\n    return (\r\n      <>\r\n        <Head>\r\n          <meta\r\n            name=\"viewport\"\r\n            content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no\"\r\n            key=\"meta_viewport\"\r\n          />\r\n        </Head>\r\n        <DefaultSeo\r\n          {...SEO}\r\n          canonical={process.env.SITE_URL + router.pathname}\r\n          openGraph={{ url: process.env.SITE_URL + router.pathname }}\r\n        />\r\n        <LogoJsonLd logo={`${process.env.SITE_URL}/static/images/logo.png`} url={process.env.SITE_URL} />\r\n        <Container>\r\n          <ThemeProvider theme={theme}>\r\n            <Component {...pageProps} />\r\n          </ThemeProvider>\r\n        </Container>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(MyApp)\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AADA;AADA;AACA;AAKA;;;;;;;;;;;;;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AADA;AAAA;AAAA;AAAA;AAKA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AAlDA;AACA;AAoDA;;;;A","sourceRoot":""}